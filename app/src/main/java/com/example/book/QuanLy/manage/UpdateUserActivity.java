package com.example.book.QuanLy.manage;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.Button;import android.widget.EditText;import android.widget.ImageView;import android.widget.Toast;import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import com.example.book.QuanLy.adapter.User.User;import com.example.book.R;import com.google.android.gms.tasks.OnFailureListener;import com.google.android.gms.tasks.OnSuccessListener;import com.google.firebase.database.DatabaseReference;import com.google.firebase.database.FirebaseDatabase;import com.squareup.picasso.Picasso;import java.util.HashMap;public class UpdateUserActivity extends AppCompatActivity {    private EditText edtName,edtBirthDay,edtAdress,edtPhone,edtRank;    private ImageView imgUser;    private Button btnUpdate, btnBack;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.manage_update_user_layout);        setTitle("Cập nhật người dùng");        setControll();        setEvent();    }    private void  setEvent() {        //        Context context = this;        // Biến FireBase        DatabaseReference dataUser = FirebaseDatabase.getInstance().getReference();        //        Intent intent = getIntent();        User user = (User) intent.getSerializableExtra("DataUser");        String keyUser = (String) intent.getSerializableExtra("keyUser");        edtName.setText(user.getName());        edtBirthDay.setText(user.getBirth());        edtPhone.setText(user.getPhone());        edtAdress.setText(user.getAddress());        edtRank.setText(user.getRank());        Picasso.get().load(user.getImage()).into(imgUser);        btnUpdate.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                if(edtName.getText().toString().trim().equals("") || edtPhone.getText().toString().trim().equals("")|| edtAdress.getText().toString().trim().equals("")||edtRank.getText().toString().trim().equals("")||edtBirthDay.getText().toString().trim().equals(""))                {                    Toast.makeText(context, "Vui Lòng Nhập Đầy Đủ Dữ Liệu Trước Khi Cập Nhật", Toast.LENGTH_SHORT).show();                }else                {                   String name =  edtName.getText().toString();                    String birth = edtBirthDay.getText().toString();                    String phone = edtPhone.getText().toString();                    String adress = edtAdress.getText().toString();                   String rank =  edtRank.getText().toString();                   User user1 = new User(adress,birth,user.getMoneyBuy(),name,phone,rank,user.getImage());                    HashMap  hashMap = new HashMap<>();                    hashMap.put(keyUser,user1);                    dataUser.child("users").updateChildren(hashMap).addOnSuccessListener(new OnSuccessListener<Void>() {                        @Override                        public void onSuccess(Void unused) {                            Toast.makeText(context, "Cập Nhật Thành Công", Toast.LENGTH_SHORT).show();                        }                    }).addOnFailureListener(new OnFailureListener() {                        @Override                        public void onFailure(@NonNull Exception e) {                            Toast.makeText(context, "Cập Nhật Không Thành Công", Toast.LENGTH_SHORT).show();                        }                    });                }            }        });        btnBack.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                Intent intent1 = new Intent(context,UserActivity.class);                startActivity(intent1);            }        });    }    private void setControll() {        edtName = findViewById(R.id.edtTenNguoiDungUpdateUser);        edtBirthDay = findViewById(R.id.edtNgaySinhUpdateUser);        edtAdress = findViewById(R.id.edtDiaChiUpdateUser);        edtPhone = findViewById(R.id.edtSoDienThoaiUpdateUser);        edtRank = findViewById(R.id.edtXepHangUpdateUser);        btnUpdate = findViewById(R.id.btnCapNhatUpdateUser);        imgUser = findViewById(R.id.profile_image_NguoiXuLyHoaDon);        btnBack =findViewById(R.id.backCapNhatThongTinNguoiDung);    }}