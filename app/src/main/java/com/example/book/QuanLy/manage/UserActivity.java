package com.example.book.QuanLy.manage;import android.content.Context;import android.os.Bundle;import android.view.View;import android.widget.Button;import android.widget.EditText;import android.widget.ListView;import android.widget.Toast;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.appcompat.app.AppCompatActivity;import com.example.book.QuanLy.adapter.User.User;import com.example.book.QuanLy.adapter.User.UserAdapter;import com.example.book.R;import com.google.firebase.database.ChildEventListener;import com.google.firebase.database.DataSnapshot;import com.google.firebase.database.DatabaseError;import com.google.firebase.database.DatabaseReference;import com.google.firebase.database.FirebaseDatabase;import java.text.NumberFormat;import java.util.ArrayList;import java.util.Locale;public class UserActivity extends AppCompatActivity {    private Context context;    private ArrayList<User> userArrayList ;    private ListView lvDanhSachUser;    private EditText edtSearch;    private Button btnSearchUser;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.manage_user_layout);        setTitle("Quản lý người dùng");        setControll();        setEvent();    }    private void setEvent() {        // Định dạng số        NumberFormat currentLocale = NumberFormat.getInstance();        Locale localeEN = new Locale("en", "EN");        NumberFormat en = NumberFormat.getInstance(localeEN);        // Biến FireBase        DatabaseReference dataUser = FirebaseDatabase.getInstance().getReference();        //Biến Context        context = this;        //        userArrayList = new ArrayList<>();        UserAdapter userAdapter = new UserAdapter(context,userArrayList, R.layout.manage_user_items);        lvDanhSachUser.setAdapter(userAdapter);        //        dataUser.child("users").addChildEventListener(new ChildEventListener() {            @Override            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {                userArrayList.add(snapshot.getValue(User.class));                userAdapter.notifyDataSetChanged();            }            @Override            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {            }            @Override            public void onChildRemoved(@NonNull DataSnapshot snapshot) {            }            @Override            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {            }            @Override            public void onCancelled(@NonNull DatabaseError error) {            }        });        btnSearchUser.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                if(edtSearch.getText().toString().equals(""))                {                    Toast.makeText(context, "Vui Lòng Nhập Dữ Liệu Trước Khi Tìm Kiếm", Toast.LENGTH_SHORT).show();                }else                {                    dataUser.child("users").addChildEventListener(new ChildEventListener() {                        @Override                        public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {                            if(snapshot.getValue(User.class).getName().contains(edtSearch.getText().toString()))                            {                                userArrayList.clear();                                userArrayList.add(snapshot.getValue(User.class));                                userAdapter.notifyDataSetChanged();                            }                        }                        @Override                        public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {                        }                        @Override                        public void onChildRemoved(@NonNull DataSnapshot snapshot) {                        }                        @Override                        public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {                        }                        @Override                        public void onCancelled(@NonNull DatabaseError error) {                        }                    });                }            }        });    }    private void setControll() {       edtSearch = findViewById(R.id.searchUserLayout);        lvDanhSachUser = findViewById(R.id.listUserLayout);        btnSearchUser = findViewById(R.id.btnTimUserLayout);    }}